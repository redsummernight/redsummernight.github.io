<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1,
		user-scalable={% if page.user_scalable %}yes{% else %}no{% endif %}">
	{% capture title %}{{ page.title | default: site.title }}{% endcapture %}
	<title>{{ title }}</title>
	<meta name="description" content="{{ page.description | default: title }}">
	<meta name="author" content="{{ site.title }}">

	{% capture css_dir %}{{ site.baseurl }}/css{% endcapture %}
	{% capture ts %}{{ site.time | date: '%s' }}{% endcapture %}
	<link rel="stylesheet" href="{{ css_dir }}/normalize.css?v=3.0.3">
	<link rel="stylesheet" href="{{ css_dir }}/common.css?v={{ ts }}">
	{% for s in page.stylesheets %}
	<link rel="stylesheet" href="{{ s | replace:'CSS_DIR',css_dir }}.css?v={{ ts }}">
	{% endfor %}

	<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
</head>
<body>
<nav class="nav-bar">
	{% if page.nav contains 'credits' %}
	<a href="{{ site.baseurl }}/credits" class="nav-button" title="who made this? i made this">?</a>
	{% endif %}
	{% if page.nav contains 'jump' %}
	<a id="jump" class="nav-button" title="jump to who knows where">jump</a>
	{% endif %}
</nav>
{{ content }}

{% if page.nav contains 'jump' %}
<script>
	var pages = [];
	{% for p in site.html_pages %}
		{% comment %}No randomly jumping to the same page.{% endcomment %}
		{% if p.jump_allowed and p.url != page.url %}
			pages.push("{{ p.url }}");
		{% endif %}
	{% endfor %}

	document.getElementById('jump').onclick = function() {
		window.location = pages[Math.floor(Math.random() * pages.length)];
	};
</script>
{% endif %}
<script>
	/* jshint ignore:start */
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-82465616-1', 'auto');
	ga('send', 'pageview');
	/* jshint ignore:end */
</script>
</body>
</html>
